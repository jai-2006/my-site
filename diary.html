<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Diary</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="header">
  <div class="top-row">
    <div class="left">
      <img src="images/avatar.png" alt="Avatar">
      <span>title</span>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="diary.html">Diary</a></li>
        <li><a href="football.html">Watford FC</a></li>
      </ul>
    </nav>
  </div>

  <div class="music-row">
    <iframe src="https://open.spotify.com/embed/track/1uLOYD6T0wdpOD8FcgsPuv"></iframe>
  </div>
</div>

<div id="content">
  <h1 class="subtitle">Diary</h1>
  <div id="all-entries"></div>
</div>

<script src="diary-data.js"></script>

<script>
const container = document.getElementById("all-entries");

diaryData.forEach((entry, entryIndex) => {
  entry.currentVideo = 0; // track which video is showing

  let html = `<div class="box entry">
      <h3 class="subtitle">${entry.date}</h3>
      <p>${entry.text}</p>
  `;

  // Images
  entry.images.forEach((img,i)=>{
    html += `<img src="${img}" alt="Diary Image"><p class="caption"></p>`;
  });

  // Videos
  if(entry.videos.length){
    html += `
      <iframe id="player-${entryIndex}" src="${entry.videos[0].embed}" allowfullscreen></iframe>
      <div class="video-controls">
        <button onclick="prevVideo(${entryIndex})">← Prev</button>
        <span id="counter-${entryIndex}">1 / ${entry.videos.length}</span>
        <button onclick="nextVideo(${entryIndex})">Next →</button>
      </div>
    `;
  }

  html += `</div>`;
  container.innerHTML += html;
});

// FUNCTIONS
function updateVideo(i){
  const entry = diaryData[i];
  const iframe = document.getElementById(`player-${i}`);
  iframe.src = ""; // force reload
  setTimeout(()=>{ iframe.src = entry.videos[entry.currentVideo].embed }, 50);
  document.getElementById(`counter-${i}`).textContent = `${entry.currentVideo+1} / ${entry.videos.length}`;
}

function prevVideo(i){
  const entry = diaryData[i];
  entry.currentVideo = (entry.currentVideo - 1 + entry.videos.length) % entry.videos.length;
  updateVideo(i);
}

function nextVideo(i){
  const entry = diaryData[i];
  entry.currentVideo = (entry.currentVideo + 1) % entry.videos.length;
  updateVideo(i);
}
</script>

<footer>
  <p>© 2026 My Site</p>
</footer>

</body>
</html>
