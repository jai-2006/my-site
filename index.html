<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Homepage</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- HEADER / TOP BANNER -->
<div id="header">
  <div class="top-row">
    <div class="left">
      <img src="images/avatar.png" alt="Avatar">
      <span>title</span>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="diary.html">Diary</a></li>
        <li><a href="football.html">Watford FC</a></li>
      </ul>
    </nav>
  </div>

  <div class="music-row">
    <iframe src="https://open.spotify.com/embed/track/1uLOYD6T0wdpOD8FcgsPuv" 
            allow="encrypted-media" allowtransparency="true"></iframe>
  </div>
</div>

<!-- MAIN CONTENT -->
<div id="content">

<!-- Profile Box -->
<div class="box profile-box">
  <div class="profile-inner">
    <div class="profile-image">
      <img src="images/profile.jpg" alt="Profile Image">
    </div>
    <div class="profile-text">
      <h1>Jai_Green</h1>
      <h2 class="subtitle">He/Him</h2>
      <h2 class="subtitle">19 Years Old</h2>
      <h2 class="subtitle">London</h2>
      <h2 class="subtitle">England</h2>
      <p>Brief intro text here. MySpace-style retro vibe.</p>
    </div>
  </div>
</div>



  <!-- Films Box -->
<!-- FILMS BOX -->
<div class="box">
  <h2 class="subtitle">Recently Watched</h2>
  <div id="films-container"></div>
</div>

<script>
// Letterboxd RSS feed
const feedURL = 'https://letterboxd.com/jai_movies/rss/';

// Container to hold film items
const container = document.getElementById('films-container');

// Fetch feed via rss2json
fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feedURL)}`)
  .then(res => res.json())
  .then(data => {
    if (data.items && data.items.length > 0) {
      data.items.forEach(item => {
        const title = item.title;
        const link = item.link;
        const pubDate = new Date(item.pubDate).toLocaleDateString();

        // Extract first image from content
        let thumbnail = '';
        const imgMatch = item.content.match(/<img[^>]+src="([^">]+)"/);
        if (imgMatch) thumbnail = imgMatch[1];

        // Create film box
        const div = document.createElement('div');
        div.className = 'film-item';
        div.innerHTML = `
          <a href="${link}" target="_blank">
            ${thumbnail ? `<img src="${thumbnail}" alt="${title}">` : ''}
          </a>
          <p><strong>${title}</strong></p>
          <p>${pubDate}</p>
        `;
        container.appendChild(div);
      });
    }
  })
  .catch(err => console.error('Error fetching RSS:', err));
</script>


// Latest diary entry
const latest = diaryData[0];
const latestDiv = document.getElementById('latest-entry');
let html = `<h3 class="subtitle">${latest.date}</h3><p>${latest.text}</p>`;
latest.images.forEach((img,i)=>html+=`<img src="${img}" alt="Diary Image"><p class="caption">${latest.captions[i]||''}</p>`);
latest.videos.forEach((vid,i)=>html+=`<video controls><source src="${vid}" type="video/mp4">Your browser does not support the video tag.</video><p class="caption">${latest.captions[i]||''}</p>`);
latestDiv.innerHTML = html;


// Visitor counter
let count = localStorage.getItem('hitCount')||0;
count = parseInt(count)+1;
localStorage.setItem('hitCount',count);
const counterWrapper = document.createElement('div');
counterWrapper.id='hit-counter-wrapper';
counterWrapper.innerHTML=`Visitors: <span id="counter-display">${count}</span>`;
document.body.appendChild(counterWrapper);
</script>

<footer>
  <p>Â© 2026 My Site</p>
</footer>

  
</body>
</html>
